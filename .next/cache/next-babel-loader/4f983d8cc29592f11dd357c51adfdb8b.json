{"ast":null,"code":"import { GoogleSpreadsheet } from 'google-spreadsheet';\nconst doc = new GoogleSpreadsheet(process.env.SHEET_DOC_ID);\nexport default (async (req, res) => {\n  try {\n    // await doc.useServiceAccountAuth(credentials)\n    await doc.useServiceAccountAuth({\n      client_email: process.env.SHEET_CLIENT_EMAIL,\n      private_key: process.env.SHEET_PRIVATE_KEY\n    });\n    await doc.loadInfo();\n    const sheet = doc.sheetsByIndex[2];\n    await sheet.loadCells('A3:B3');\n    const activatePromotionCell = sheet.getCell(2, 0);\n    const textPromotionCell = sheet.getCell(2, 1); // console.log(activatePromotionCell.value)\n\n    res.end(JSON.stringify({\n      showCoupon: activatePromotionCell.value === \"VERDADEIRO\",\n      message: textPromotionCell.value\n    }));\n  } catch (err) {\n    res.end(JSON.stringify({\n      showCoupon: false,\n      message: \"\"\n    }));\n  }\n});","map":{"version":3,"sources":["C:/FrontEndTrack/hunchbox/pages/api/get-promo.js"],"names":["GoogleSpreadsheet","doc","process","env","SHEET_DOC_ID","req","res","useServiceAccountAuth","client_email","SHEET_CLIENT_EMAIL","private_key","SHEET_PRIVATE_KEY","loadInfo","sheet","sheetsByIndex","loadCells","activatePromotionCell","getCell","textPromotionCell","end","JSON","stringify","showCoupon","value","message","err"],"mappings":"AACA,SAAQA,iBAAR,QAAgC,oBAAhC;AAEA,MAAMC,GAAG,GAAG,IAAID,iBAAJ,CAAsBE,OAAO,CAACC,GAAR,CAAYC,YAAlC,CAAZ;AAGC,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAkB;AAEhC,MAAG;AACD;AACA,UAAML,GAAG,CAACM,qBAAJ,CAA0B;AAC9BC,MAAAA,YAAY,EAAEN,OAAO,CAACC,GAAR,CAAYM,kBADI;AAE9BC,MAAAA,WAAW,EAAER,OAAO,CAACC,GAAR,CAAYQ;AAFK,KAA1B,CAAN;AAIA,UAAMV,GAAG,CAACW,QAAJ,EAAN;AAGA,UAAMC,KAAK,GAAGZ,GAAG,CAACa,aAAJ,CAAkB,CAAlB,CAAd;AACA,UAAMD,KAAK,CAACE,SAAN,CAAgB,OAAhB,CAAN;AAEA,UAAMC,qBAAqB,GAAGH,KAAK,CAACI,OAAN,CAAc,CAAd,EAAiB,CAAjB,CAA9B;AACA,UAAMC,iBAAiB,GAAGL,KAAK,CAACI,OAAN,CAAc,CAAd,EAAiB,CAAjB,CAA1B,CAbC,CAcD;;AAEAX,IAAAA,GAAG,CAACa,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAe;AACrBC,MAAAA,UAAU,EAAEN,qBAAqB,CAACO,KAAtB,KAA8B,YADrB;AAErBC,MAAAA,OAAO,EAAEN,iBAAiB,CAACK;AAFN,KAAf,CAAR;AAID,GApBD,CAqBA,OAAME,GAAN,EAAU;AACRnB,IAAAA,GAAG,CAACa,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAe;AACrBC,MAAAA,UAAU,EAAE,KADS;AAErBE,MAAAA,OAAO,EAAE;AAFY,KAAf,CAAR;AAID;AACD,CA7BD","sourcesContent":[" \r\nimport {GoogleSpreadsheet} from 'google-spreadsheet';\r\n\r\nconst doc = new GoogleSpreadsheet(process.env.SHEET_DOC_ID)\r\n\r\n \r\n export default async (req, res)=>{\r\n  \r\n  try{\r\n    // await doc.useServiceAccountAuth(credentials)\r\n    await doc.useServiceAccountAuth({\r\n      client_email: process.env.SHEET_CLIENT_EMAIL,\r\n      private_key: process.env.SHEET_PRIVATE_KEY\r\n    })\r\n    await doc.loadInfo()\r\n    \r\n\r\n    const sheet = doc.sheetsByIndex[2]\r\n    await sheet.loadCells('A3:B3')\r\n    \r\n    const activatePromotionCell = sheet.getCell(2, 0) \r\n    const textPromotionCell = sheet.getCell(2, 1)\r\n    // console.log(activatePromotionCell.value)\r\n    \r\n    res.end(JSON.stringify({\r\n      showCoupon: activatePromotionCell.value===\"VERDADEIRO\",\r\n      message: textPromotionCell.value\r\n    }))\r\n  }\r\n  catch(err){\r\n    res.end(JSON.stringify({\r\n      showCoupon: false,\r\n      message: \"\"\r\n    }))\r\n  }\r\n }"]},"metadata":{},"sourceType":"module"}